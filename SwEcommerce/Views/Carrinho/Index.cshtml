@model IEnumerable<SwEcommerce.Models.Carrinho>

@{
    ViewBag.Title = "Index";
    ViewData["Compras"] = ViewBag.Compras;
}

<h2>Index</h2>

<div class="row">
    <div class="col-lg-12 col-md-12 col-xs-12">

        @Html.Partial("AddCarrinho")
                  
    </div>
    <hr />
</div>

<table class="table" border="1">
    <tr>
        <th>Item</th>
        <th>Quantidade</th>
        <th>Preço</th>
        <th>Promoção</th>
    </tr>
    @{ float total = 0;
        if (ViewBag.Compras != null)
    {
       
        for (int i = 0; i < ViewBag.Compras.Count; i++)
        {
            <tr>
                <td>@ViewBag.Compras[i].Nome</td>
                <td>@ViewBag.Compras[i].Quantidade</td>
                <td>R$ @ViewBag.Compras[i].Preco</td>
                <td>
                @{ int promoid = ViewBag.Compras[i].PromoId;
                    switch (promoid){
                       case 1:
                        @:Pague 1 e Leve 2
                            break;
                       case 3:
                       @:3 por 10 reais
                       break;
                    }
                    }

                   </td>

                @{total = total + ViewBag.Compras[i].Preco;}
            </tr>
            
      
        }
    }   
    
    }
   
</table>
<p>
    <h2> Total R$ @total </h2>
</p>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/SwEcommerce")
}